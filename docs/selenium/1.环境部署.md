## 1. 使用 driver 部署

- 查看当前系统的 chrome 版本 chrome://settings/help
- 下载指定的浏览器驱动 https://chromedriver.chromium.org/downloads

使用示例:

将下载好的 chromedriver 放到脚本的同级目录

```python
from selenium import webdriver
def init_driver():
    options = webdriver.ChromeOptions()
    options.add_argument("--disable-blink-features=AutomationControlled")
    driver = webdriver.Chrome(executable_path="./chromedriver", chrome_options=options,)
    return driver
```

那么每次都需要在同级目录放置 chromedriver? 自然不必如此,通过查阅源码:

```python
def __init__(self, executable_path="chromedriver", port=0,
            options=None, service_args=None,
            desired_capabilities=None, service_log_path=None,
            chrome_options=None, keep_alive=True):
"""
:Args:
executable_path - path to the executable. If the default is used it assumes the executable is in the \$PATH
"""
```

我们可以知道 executable_path 首先会寻找 `$PATH` 变量中是否包含 chromedriver ,因此只需要将下载好的 chromedriver 放到任意系统目录中即可

```bash
echo $PATH # 可以输出当前所有系统变量
open ~/.local/bin  # 任选一条打开,将下载好的 chromedriver 放到该文件夹中即可
```

```python
def init_driver():
    options = webdriver.ChromeOptions()
    options.add_argument("--disable-blink-features=AutomationControlled")
    driver = webdriver.Chrome(chrome_options=options,)
    return driver
```

## 2. 使用 server 部署

### 安装 python3 和 nodejs

- python 官网 : https://www.python.org/downloads/
- nodejs 官网 : https://nodejs.org/zh-cn/
- java
  安装 homebrew https://brew.sh/

### 安装 selenium server

```bash
# 安装cnpm
npm install cnpm -g
# 安装服务
cnpm install selenium-standalone -g
# 安装驱动
selenium-standalone install --drivers.firefox.baseURL=http://npm.taobao.org/mirrors/geckodriver --baseURL=http://npm.taobao.org/mirrors/selenium --drivers.chrome.baseURL=http://npm.taobao.org/mirrors/chromedriver --drivers.ie.baseURL=http://npm.taobao.org/mirrors/selenium
```

### 安装 selenium client

```bash
pip3 install selenium
```

### 启动 selenium server

```bash
selenium-standalone start
```

### 连接 selenium hub 调用浏览器

```python
from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

# 调用chrome浏览器的示例
driver = webdriver.Remote(
   command_executor='http://127.0.0.1:4444/wd/hub',
   desired_capabilities=DesiredCapabilities.CHROME)

# 调用opera浏览器的示例
driver = webdriver.Remote(
   command_executor='http://127.0.0.1:4444/wd/hub',
   desired_capabilities=DesiredCapabilities.OPERA)

driver.get("https://www.python.org")
```
